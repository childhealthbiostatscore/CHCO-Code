---
title: "CALICO Exploratory Data Analysis"
author: "Tim Vigers"
date: "today"
date-format: long
format:
  html:
    toc: true
    toc-depth: 5
    toc-float: true
    code-fold: true
    self-contained: true
    fig-cap-location: top
    fig-width: 12
    fig-height: 9
    page-layout: full
    theme:
      light: flatly
      dark: darkly
bibliography: /Users/timvigers/Documents/Miscellaneous/zotero.bib
csl: /Users/timvigers/GitHub/styles/american-medical-association.csl
editor: source
---

```{r setup}
#| include: false
library(tidyverse)
library(childsds)
library(gtsummary)
```

```{r data import}
#| include: false
load("/Users/timvigers/Library/CloudStorage/OneDrive-TheUniversityofColoradoDenver/Vigers/BDC/Janet Snell-Bergeon/CALICO/Data_Clean/analysis_data.RData")
```

# Demographics

```{r}
#| label: tbl-table-1
#| tbl-cap: Participant demographics
df %>%
  filter(is.na(redcap_repeat_instrument)) %>%
  select(all_of(demo_vars)) %>%
  tbl_summary(missing_text = "(Missing)")
```

# Aim 1 comparisons

## By age

```{r}
#| label: tbl-table-1-age
#| tbl-cap: Stratified by age group
df %>%
  filter(redcap_repeat_instance == 1) %>%
  mutate(`Age Group` = cut(cv_age, c(-Inf, 15, Inf),
    right = F,
    labels = c("< 15 years", ">= 15 years")
  )) %>%
  select(`Age Group`,all_of(aim1_vars)) %>%
  tbl_summary(by=`Age Group`,missing_text = "(Missing)") %>%
  add_overall() %>%
  # add_p(test.args = all_tests("fisher.test") ~ list(simulate.p.value = T)) %>%
  separate_p_footnotes()
```
