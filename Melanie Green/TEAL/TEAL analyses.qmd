---
title: "Melanie Cree - TEAL Study"
author: "Laura Pyle"
date: "today"
date-format: long
format:
  html:
    toc: true
    toc-depth: 5
    toc-float: true
    code-fold: true
    self-contained: true
    fig-cap-location: top
    page-layout: full
editor: source
execute:
  echo: false
  message: false
---

```{r libraries}
#| include: false
library(tidyverse)
library(arsenal)
library(dplyr)
```

```{r data import}
#| include: false
source("/Volumes/Peds Endo/Melanie Green/TEAL/Data_raw/190636TEAL_R_2023-12-05_1149.R")

# remove screen fails
data <- data %>% filter(!study_group == 3)

# wide dataset with needed variables
keep_wide <- data %>% select(subject_id, study_group.factor, age, bmi_cat.factor, tanner,
                             screen_wt, screen_height, screen_bmi, screen_bmi_percentile, screen_bmi_percentile,
                             baseline_wt, baseline_ht, baseline_bmi, baseline_bmi_perc, baseline_bmi_zscore,
                             mid_wt_2, mid_ht_2, mid_bmi_2, mid_bmi_perc_2, mid_bmi_zscore_2,
                             final_wt_3, final_ht_3, final_bmi_3, final_bmi_perc_3, final_bmi_zscore_3,
                             liver_fat_perc, liver_fat_perc_final,
                             dmets, mid_3dmets, dmets_final,
                             kcals_total, kcals_day_final,
                             t_ahi, t_ahi_final,
                             homa, matsuda, 
                             homa_final, matsuda_final 
                             )
keep_wide$final_wt_3 <- as.numeric(keep_wide$final_wt_3)

# calculate absolute weight change (baseline as reference)
keep_wide$mid_abs_wt_change <- keep_wide$mid_wt_2 - keep_wide$baseline_wt
keep_wide$final_abs_wt_change <- keep_wide$final_wt_3 - keep_wide$baseline_wt

# calculate percent weight change (baseline as reference)
keep_wide$mid_per_wt <- (keep_wide$mid_abs_wt_change / keep_wide$baseline_wt ) * 100



# create long dataset for mixed models
```

```{r functions}

```

# Header 1

```{r message=FALSE,warning=FALSE,dpi=1200,results='asis'}

```

