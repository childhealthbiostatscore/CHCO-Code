---
title: "EarlyGlargine_analysis"
author: "Casey Sakamoto"
date: "2/11/2022"
output: pdf_document
---

```{r setup, include=FALSE}
library(arsenal)
library(readxl)
library(readr)
library(Hmisc)
library(tidyverse)
library(performance)
library(knitr)
library(lubridate)
library(stringr)
library(table1)
knitr::opts_chunk$set(echo = FALSE)
if(Sys.info()["sysname"] == "Windows"){
  home_dir = "S:/Laura/Peds Endo/Ohman/Early glargine prospective"
} else if (Sys.info()["sysname"] == "Linux"){
  home_dir = "~/UCD/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/Peds Endo/Ohman/Early glargine prospective"
} else if (Sys.info()["sysname"] == "Darwin"){
  home_dir = "/Volumes/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/Peds Endo/Ohman/Early glargine prospective"
}
knitr::opts_knit$set(root.dir = home_dir)
```

```{r table1 comments, include=FALSE}
# TABLE
# 
# For this we will compare the Control group (Late glargine) vs the Intervention (Early glargine) group 
#  
# 1.	Patient Characteristics table
# a.	Sex (nih_sex, column Q)
# b.	Age range (age_at_consent, column P)
# c.	Race/ethnicity (nih_race and nih_ethnicity; columns R and S) 
# d.	New onset vs Established T1DM (diabetes_diagnosis; column AY) 
#                                                                i.      For established T1DM:
# 1.       Duration of T1D (column AZ)
# 2.       Home regimen (columns BA-BE)
# e.	HbA1c (column CQ)
#                                                                i.      Early vs Late groups
#                                                              ii.      New onset vs Established 
# f.	or first pH; column CD
#                                                                i.      Early vs Late groups
#                                                              ii.      New onset vs Established 
# g.	or first bicarb; column CH
#                                                                i.      Early vs Late groups
#                                                              ii.      New onset vs Established 
# h.	Glargine dose/kg (column AS)
#                                                                i.      Early vs Late groups
#                                                              ii.      New onset vs Established 
#                                                              
#                                                              
# Per Laura, It seems like the simplest approach to this is making several tables, one separating by trt and the other by diabetes diag
```

```{r Patient Characteristics}
# table 1
#  cont.rmstat = list(c("mediqr"))
EG_demog_table1 =  table1( ~ nih_sex + age_at_consent + nih_race + nih_ethnicity + diabetes_diagnosis + hba1c + ph + bicarbonate + glargine_dose_per_kg
                        | study_group, data = EG_patient_char, topclass="Rtable1-zebra",
                         render.continuous=c( "Median [IQR]"="Median [Q1, Q3]"))

T1D_lab_table1 =  table1( ~ `duration_of_t1d (years)` + home_regimen + hba1c + ph + bicarbonate + glargine_dose_per_kg 
                       | diabetes_diagnosis, data = EG_patient_char, topclass="Rtable1-zebra",
                        render.continuous=c( "Median [IQR]"="Median [Q1, Q3]"))


```




```{r }

```

