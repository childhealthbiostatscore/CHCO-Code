---
title: "Title"
author: "Tim Vigers"
date: "`r format(Sys.time(), '%d %B %Y')`"
format:
  html:
    toc: true
    toc-depth: 5
    toc-float: true
    code-fold: true
    self-contained: true
    fig-cap-location: top
    page-layout: full
editor: source
---

```{r}
#| echo: false
library(tidyverse)
library(sas7bdat)
library(gt)
library(gtsummary)
```

# Teen-LABS

Per Todd, samples "FAF001634 0200" and "FAF001855 0200" were excluded due to "invalid draw date information that prevented the DCC from linking these specimens with study data."

```{r}
# Import
df = read.sas7bdat("/Volumes/Peds Endo/Petter Bjornstad/Teen Labs/Data_Cleaned/bjornstadancillary.sas7bdat")
# Format 
df = df %>% 
  select(SAMPLE_ID,age,SEX,RACE,ETHN,HBA1C) %>% 
  filter(!SAMPLE_ID %in% c("FAF001634 0200","FAF001855 0200"))
colnames(df) = str_to_title(colnames(df))
df = df %>% rename(ID="Sample_id",Ethnicity=Ethn,HbA1c="Hba1c")
# Categorical levels
df$Sex = factor(df$Sex,levels = 1:2,labels = c("Male","Female"))
df = df %>% unite(`Race/Ethnicity`,Race,Ethnicity)
df$`Race/Ethnicity` = factor(df$`Race/Ethnicity`,levels = c("1_1", "1_2", "2_2","8_2"),
                             labels = c("Other","Non-Hispanic White","Non-Hispanic Black","Other"))
# Summary
df %>% select(-ID) %>% 
  tbl_summary(statistic = list(
      Age ~ "{mean} ({sd})",
      HbA1c ~ "{median} [{p25}, {p75}]"
    ))
```